"use strict";function $buo_f(){var e=document.createElement("script");e.src="//browser-update.org/update.min.js",document.body.appendChild(e)}console.log("Chorus : welcome");var $buoop={vs:{i:10,f:-4,o:-4,s:8,c:-4},api:4};try{document.addEventListener("DOMContentLoaded",$buo_f,!1)}catch(e){window.attachEvent("onload",$buo_f)}$.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:t[1]||0},chorus.Common=function(){function e(){var e=window.navigator.userAgent,t=!1,n="",o=e.indexOf("MSIE ");if(o>0&&(n=parseInt(e.substring(o+5,e.indexOf(".",o)),10),t=!0),e.indexOf("Trident/")>0){var a=e.indexOf("rv:");n=parseInt(e.substring(a+3,e.indexOf(".",a)),10),t=!0}var i=e.indexOf("Edge/");i>0&&(n=parseInt(e.substring(i+5,e.indexOf(".",i)),10),t=!0),t&&($("html").addClass("is-ie"),$("html").addClass("ie-version-"+n))}var t={title:"screen_xs",minResolution:768},n=$("#mobileMenuToggleButton"),o=function(e){var t;$("script").each(function(e,n){var o=$(n);void 0!=o.attr("src")&&o.attr("src").search("https://maps.googleapis.com/maps/api/js")>=0&&(t=o)}),void 0!=t?a():$.getScript("https://maps.googleapis.com/maps/api/js?key="+common.GOOGLE_API_KEY+"&libraries=places&callback=common.onGetGoogleMapsSDK_handler")},a=function(){$(common).trigger("onGotGoogleMapsSDK")},i=function(e){e.preventDefault();var t,n=$(this),o=n.parent(),a=o.data("videoplatform"),i=o.data("videoid");if(o.has("iframe").length<=0){switch(a){case"vimeo":t='<iframe src="https://player.vimeo.com/video/'+i+'?autoplay=1&title=0&byline=0&portrait=0" class="video-item" width="560" height="315" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'}o.append(t)}},s=function(){var e=$("#stickyNavigation");$("body");$(window).scrollTop()>=e.find("nav").outerHeight()?e.addClass("add-sticky"):e.removeClass("add-sticky")},l=!1,r=function(e){if(e.hasClass("sliding-row")&&!e.hasClass("intro-animated")){if(l)return;l=!0,$(window).width()>t.minResolution?home.animateInBBOptionTitles():$(".mobile-slider").each(function(e,t){var n=$(this);TweenMax.to(n,1,{scrollTo:{x:0,ease:Sine.easeInOut,delay:1}})})}e.addClass("intro-animated")},d=function(){$(window).scrollTop()>$(window).height()/2?$("#backToTop").addClass("do-show animated fadeIn"):$("#backToTop").removeClass("do-show animated fadeIn")},c=function(){$(".scroll-point-animated").each(function(e,n){var o=$(n);$(window).width()>t.minResolution?$(window).scrollTop()>o.offset().top-$(window).height()&&r(o):o.offset().top<=.5*$(window).height()&&r(o)}),$(".init-opacity-none").each(function(e,n){var o=$(n);$(window).width()>=t.minResolution?$(window).scrollTop()>o.offset().top-.8*$(window).height()&&(o.hasClass("animated")||o.addClass("animated fadeIn")):(o.offset().top,$(window).height())})},u=function(e){e.preventDefault(),$("body").hasClass("mobile-navigation-active")?$("body").removeClass("mobile-navigation-active"):($("body").addClass("mobile-navigation-active"),$("#stickyNavigation").addClass("docked"))},f=function(e){e.preventDefault(),TweenMax.to($(window),1,{scrollTo:0})},w=function(e){h(),p()},g=function(e){if(s(),c(),d(),$("#navigationDockPoint").length>0){var t=$("#navigationDockPoint").offset().top;$(window).scrollTop()>=t?$("#stickyNavigation").addClass("docked"):$("#stickyNavigation").removeClass("docked")}},p=function(){if($(".site-scroll-wrap").css("max-height",""),$("body").hasClass("use-mobile-viewport")){var e=$(window).height(),t=e-$("nav").height();$(".site-scroll-wrap").css("max-height",t+"px"),$(window).off("scroll",g),$(".site-scroll-wrap").on("scroll",g)}else $(".site-scroll-wrap").css("max-height","auto"),$(window).on("scroll",g),$(".site-scroll-wrap").off("scroll",g)},h=function(){$(window).width()<t.minResolution?($("body").addClass("use-mobile-viewport"),$("html").addClass("mobile-no-scroll")):($("body").removeClass("use-mobile-viewport"),$("html").removeClass("mobile-no-scroll"))},m=function(e,t,n){var o=ga.getAll()[0].get("name");ga(o+".send","event",e,t,n)},b=function(){$(".do-ga-track").each(function(e,t){var n,o,a,i,s=$(t);s.on("click",function(e){switch(n=s.data("gaprop"),o=n.label,a=n.action,i=n.category,"hamburger"==a&&(o=$("body").hasClass("mobile-navigation-active")?"open":"close"),i){case"addresschecknav":case"addresscheckblade":return;default:m(i,a,o)}}),s.is(":text")&&(s.on("focusin",function(e){n=s.data("gaprop"),i=n.category,s.addClass("didfocus"),m(i,"focusin","")}),s.on("focusout",function(e){n=s.data("gaprop"),i=n.category,s.removeClass("didfocus didwrite"),m(i,"focusout","")}),s.on("input",function(e){n=s.data("gaprop"),i=n.category,s.hasClass("didwrite")||(s.addClass("didwrite"),m(i,"typing",""))}))})},v=function(){h(),$(window).on("resize",w),n.on("click",u),$(".btn-back-to-top").on("click",f),$(".preview-play-button").on("click",i),p(),c(),b()};return{Common:function(){e(),v(),o()},onGetGoogleMapsSDK_handler:a,GOOGLE_API_KEY:"AIzaSyDrBkTwzJJ3lzu8ddK6D9bPO_6Y5ILIMpc",doGoogleAnalyticsTrack:m}},chorus.ComponentAddress=function(){var e,t=function(){var t=[];$(".search-address-text-input").each(function(n,o){t.push($(o).attr("id")),new google.maps.places.Autocomplete(document.getElementById($(o).attr("id")),{types:["geocode"],componentRestrictions:{country:"nz"}}).boundElementTracking=$(o).attr("data-gaprop"),$(this).on("input",function(t){setTimeout(function(){var t=$(".pac-item").first(),n=$(t).find("span").eq(2).text(),o=$(t).find("span").eq(3).text(),a=n+""+o;(new google.maps.Geocoder).geocode({address:a,componentRestrictions:{country:"nz"}},function(t,n){if("OK"==n){if(t[0]){var o=t[0];console.log(o),e=o}}else console.log("Geocode was not successful for the following reason: "+n)})},500)})})};return{ComponentAddress:function(){$(common).on("onGotGoogleMapsSDK",t)}}},chorus.Home=function(){var e="",t=-1,n=!1,o="screen_lg",a=function(){$(".plan-slider").addClass("mobile-slider"),$(".plan-column-wrap").css("width","auto"),$(".plan-slider-inner-wrap").css("width","auto");var e=Math.floor(1*$(".plan-slider-inner-wrap").width());$(".plan-column-wrap").width(e),$(".plan-slider-inner-wrap").css("width",Math.floor($(".plan-slider-inner-wrap").first().find(".plan-column-wrap").length*$(".plan-column-wrap").first().outerWidth())),$(".mobile-slider").each(function(e,t){var n=$(this);n.scrollLeft(n.find(".plan-slider-inner-wrap").width()-10)})},i=function(){$(".plan-slider").removeClass("mobile-slider"),$(".plan-column-wrap").attr("style",""),$(".plan-slider-inner-wrap").attr("style","")},s=function(){"ontouchstart"in document.documentElement?$(window).width()<768?"screen_xs"!=o&&(o="screen_xs",a()):i():$(window).width()>=768?(o="screen_sm",i()):a()},l=function(){$(".plan-info-description").attr("style",""),$(".plan-slider").each(function(e,t){var n=0;$(this).find(".plan-info-description").each(function(e,t){$(t).height()>n&&(n=Math.ceil($(t).height()))}),$(this).find(".plan-info-description").each(function(e,t){$(this).height(n)})})},r=function(n,o){if($(window).width()>=768)return void $(".title").attr("style","");var a,i,s,l=o>t?-1:1,r=$(".titles").first().width()+50;if(n!=e)switch(e=n){case"basic":a=Math.round(r*l),i=Math.round(-1*r*l),s=Math.round(-1*r*l),a=a<=0?-50:a,i=i<=0?-50:i,s=s<=0?-50:s,TweenMax.set($(".title-basic"),{left:a}),TweenMax.to($(".title-better"),.3,{left:i}),TweenMax.to($(".title-best"),.3,{left:s}),TweenMax.to($(".title-basic"),.3,{left:"50%"});break;case"better":a=Math.round(-1*r*l),i=Math.round(r*l),s=Math.round(-1*r*l),a=a<=0?-50:a,i=i<=0?-50:i,s=s<=0?-50:s,TweenMax.set($(".title-better"),{left:i}),TweenMax.to($(".title-basic"),.3,{left:a}),TweenMax.to($(".title-best"),.3,{left:s}),TweenMax.to($(".title-better"),.3,{left:"50%"});break;case"best":a=Math.round(-1*r*l),i=Math.round(-1*r*l),s=Math.round(r*l),a=a<=0?-50:a,i=i<=0?-50:i,s=s<=0?-50:s,TweenMax.set($(".title-best"),{left:s}),TweenMax.to($(".title-basic"),.3,{left:a}),TweenMax.to($(".title-better"),.3,{left:i}),TweenMax.to($(".title-best"),.3,{left:"50%"})}t=o},d=function(){var e=$(".plan-slider").scrollLeft(),t=$(".plan-slider-inner-wrap").width(),n=e/t;$(".plan-slider-progress").each(function(t,o){$(this).find("li").removeClass("active"),n<.1?($(this).find("li").eq(0).addClass("active"),0==t&&r("basic",e)):n>=.11&&n<.3?($(this).find("li").eq(1).addClass("active"),0==t&&r("basic",e)):n>=.31&&n<.5?($(this).find("li").eq(2).addClass("active"),0==t&&r("better",e)):n>=.41&&n<.7?($(this).find("li").eq(3).addClass("active"),0==t&&r("better",e)):n>=.71&&($(this).find("li").eq(4).addClass("active"),0==t&&r("best",e))})},c=function(e){var t=e.scrollLeft();$(".plan-slider").scrollLeft(t)},u=function(e){switch(e.type){case"scroll":d(),c($(e.currentTarget))}},f=function(){$("header").addClass("animated fadeIn"),TweenMax.delayedCall(1,function(){$("header h1").addClass("animated fadeIn")}),TweenMax.delayedCall(2,function(){$("header .search-address-form").addClass("animated fadeIn")})},w=function(){var e=$("header").css("background-image"),t=e.split('"')[1],n=new Image;n.src=t,$(n).on("load",function(e){f()}).on("error",function(e){f()})},g=function(e){l(),s(),d()},p=function(e){},h=[{titleId:"#WIRELESS",rings:["#WIRELESS_ring1"],text:"#WIRELESS_title_text",bg:"#WIRELESS_bg",bgZoom:1},{titleId:"#ADSL",rings:["#ADSL_ring1"],text:"#ADSL_title_text",bg:"#ADSL_bg",bgZoom:1},{titleId:"#VDSL",rings:["#VDSL_ring1","#VDSL_ring2"],text:"#VDSL_title_text",bg:"#VDSL_bg",bgZoom:.5},{titleId:"#FIBRE",rings:["#FIBRE_ring1","#FIBRE_ring2"],text:"#FIBRE_title_text",bg:"#FIBRE_bg",bgZoom:.4},{titleId:"#FIBRE_PRO",rings:["#FIBRE_PRO_ring1","#FIBRE_PRO_ring2","#FIBRE_PRO_ring3"],text:"#FIBRE_PRO_title_text",bg:"#FIBRE_PRO_bg",bgZoom:.1}],m=function(){$(h).each(function(e,t){TweenMax.set($(t.text),{attr:{opacity:0}}),TweenMax.set($(t.bg),{transformOrigin:"50% 50%"}),TweenMax.set($(t.bg),{scale:0}),$(t.rings).each(function(e,n){TweenMax.set($(n),{transformOrigin:"50% 50%"}),TweenMax.set($(n),{attr:{x:$(t.titleId).width()/2},scale:0})})})},b=function(){n||(n=!0,TweenMax.delayedCall(.3,function(){TweenMax.to($(h[4].bg),h[4].bgZoom,{scale:1,ease:Sine.easeOut}),TweenMax.to($(h[3].bg),h[3].bgZoom,{scale:1,ease:Sine.easeOut}),TweenMax.to($(h[2].bg),h[2].bgZoom,{scale:1,ease:Sine.easeOut}),TweenMax.to($(h[1].bg),h[1].bgZoom,{scale:1,ease:Sine.easeOut}),TweenMax.to($(h[0].bg),h[0].bgZoom,{scale:1,ease:Sine.easeOut,onComplete:function(){TweenMax.to($(h[4].text),.4,{opacity:1,ease:Sine.easeOut}),TweenMax.to($(h[3].text),.4,{opacity:1,ease:Sine.easeOut}),TweenMax.to($(h[2].text),.4,{opacity:1,ease:Sine.easeOut}),TweenMax.to($(h[1].text),.4,{opacity:1,ease:Sine.easeOut}),TweenMax.to($(h[0].text),.4,{opacity:1,ease:Sine.easeOut}),TweenMax.to($(h[4].bg),.1,{scale:1.1,delay:1,ease:Sine.easeIn}),TweenMax.to($(h[3].bg),.1,{scale:1.1,delay:1,ease:Sine.easeIn}),TweenMax.to($(h[2].bg),.1,{scale:1.1,delay:1,ease:Sine.easeIn}),TweenMax.to($(h[1].bg),.1,{scale:1.1,delay:1,ease:Sine.easeIn}),TweenMax.to($(h[0].bg),.1,{scale:1.1,delay:1,ease:Sine.easeIn,onComplete:function(){TweenMax.to($(h[4].bg),.2,{scale:1,delay:.1,ease:Sine.easeOut}),TweenMax.to($(h[3].bg),.2,{scale:1,delay:.1,ease:Sine.easeOut}),TweenMax.to($(h[2].bg),.2,{scale:1,delay:.1,ease:Sine.easeOut}),TweenMax.to($(h[1].bg),.2,{scale:1,delay:.1,ease:Sine.easeOut}),TweenMax.to($(h[0].bg),.2,{scale:1,delay:.1,ease:Sine.easeOut}),$(h).each(function(e,t){$(t.rings).each(function(e,t){TweenMax.to($(t),.5,{scale:1,delay:.05*e,ease:Sine.easeOut})})})}})}})}))},v=function(){$(window).on("scroll",p),$(window).on("resize",g),l(),$(".plan-slider").on("scroll",u),d(),setTimeout(function(){$(window).trigger("resize")},100)};return{Home:function(){v(),s(),$(window).width()>768&&m(),w()},initAnimationPositions:m,animateInBBOptionTitles:b}},chorus.AskForBetter=function(){var e=function(e){$("#theAddress").text(e),$("#noAddressSplash").remove(),$("#bbCheckerContent").removeClass("content-no-show")},t=function(){if(null!=$.urlParam("lookup")){var t=decodeURI($.urlParam("lookup")),n=new google.maps.Geocoder,o=t;n.geocode({placeId:o},function(t,n){if("OK"===n)if(t[0]){console.log(t);var o=t[0],a=o.formatted_address;e(a)}else console.log("No results found"),window.location.href="/ask-for-better/",window.location.reload(!0);else console.log("Geocoder failed due to: "+n),$("#noAddressSplash").addClass("animated fadeIn")})}else $("#noAddressSplash").addClass("animated fadeIn")};return{AskForBetter:function(){console.log($.urlParam("lookup")),$(common).on("onGotGoogleMapsSDK",t)},removeSplash:e}},chorus.BroadbandProviders=function(){return{BroadbandProviders:function(){}}},chorus.DataSpeedCalculator=function(){return{DataSpeedCalculator:function(){}}},chorus.HowToGuides=function(){var e=function(){var e=parseInt($(".grid-item").first().css("margin-bottom")),t=$(".do-grid").width();$(window).width()<768?(e=0,$(".grid-item").width(t-e)):$(".grid-item").width(t/2-e/2);var n=$(".do-grid").hasClass("no-transition")?0:500;$(".do-grid").masonry({itemSelector:".grid-item",gutter:e,transitionDuration:n})},t=function(t){e()},n=function(){$(window).on("resize",t),setTimeout(e,10)};return{HowToGuides:function(){n()}}};

/* Added to update tool button css */
var targetButton;
$(window).on('resize', function() {
  if($('div.bbc-address-autocomplete button.btn-address-search-action').length > 0) {
      targetButton = $('div.bbc-address-autocomplete button.btn-address-search-action');
    if($(window).width() > 767) {
      targetButton.text('CHECK NOW');
      targetButton.css('margin-top','-1px');
    } else {
      targetButton.text('');
      targetButton.css('margin-top','24px');
    }
  }
});
